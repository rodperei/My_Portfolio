<!DOCTYPE html>

<html>
<head>
	<meta charset="UTF-8">
	<meta name ="viewport" content="width=device-width, initial-scale=1.0">
	<title>ralmada - Minishell</title>
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

	<link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:ital,wght@0,200..800;1,200..800&family=Space+Mono:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">
	<link rel="stylesheet" href="../css/minishell.css">
</head>
<body>
	<nav>
		<ul class="vertbar">
			<li>
				<span>Rodrigo Almada</span>
				<a onclick=hideVertbar()><svg xmlns="http://www.w3.org/2000/svg" height="26px" viewBox="0 -960 960 960" width="26px" fill="black"><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></a>
			</li>
			<li><a href="../index.html">Home</a></li>
			<li><a href="#">About</a></li>
			<li><a href="../assets/files/CV_Inglês.pdf" target="_blank">Resume</a></li>
		</ul>
		<ul class="hbar">
			<li><span>Rodrigo Almada</span></li>
			<li class="hideOnMobile"><a href="../index.html">Home</a></li>
			<li class="hideOnMobile"><a href="#">About</a></li>
			<li class="hideOnMobile"><a href="assets/files/CV_Inglês.pdf" target="_blank">Resume</a></li>
			<li class="menuButton" onclick=showVertbar()><a href="#"><svg xmlns="http://www.w3.org/2000/svg" height="26px" viewBox="0 -960 960 960" width="26px" fill="black"><path d="M120-240v-80h720v80H120Zm0-200v-80h720v80H120Zm0-200v-80h720v80H120Z"/></svg></a></li>
		</ul>
	</nav>
	<h1>Minishell</h1>
	<p class="subtitle"><i>As beatifull as a shell</i></p>
	<br>
	<div class="proj_logo">
		<div>
			<div class="fx"></div>
			<img class="msh" src="../assets/images/minishell.png" alt="mshell_png">
		</div>
	</div>
	<br>
	<h2>Overview</h2>
	<p>As part of the 42 Common Core curriculum, I developed, along with a
	partner, a bash-like shell—a transformative project that demystified how
	operating systems manage software. By working directly with <b>POSIX system
	calls</b>, <b>file descriptors</b>, and <b>process lifecycles</b>, I
	gained a deep understanding of the execution 'magic' that happens behind the
	scenes. The project required navigating complex hurdles, such as
	synchronizing asynchronous <b>signals</b>, preventing <b>zombie processes</b>
	through the us of <code>waitpid()</code>, and the management of <b>I/O
	pipes</b>.
	Combined with manual memory management and robust string parsing, this
	project served as a masterclass in resource management and low-level
	architecture.</p>
	<br>
	<h2>Project Requirements</h2>
	<ul class="bullet_points">
		<p>To complete the project, our shell should:</p>
		<li>Display a dynamic prompt and have a working command history.</li>
		<li>Search and launch the right executable (based on the PATH variable
			or using arelative or an absolute path).</li>
		<li>Not interpret unclosed quotes or special characters which are not
			required, such as \ (backslash) or ; (semicolon).</li>
		<li>Handle ’ (single quote) which should prevent the shell from
			interpreting the metacharacters in the quoted sequence.</li>
		<li>Handle " (double quote) which should prevent the shell from
			interpreting the metacharacters in the quoted sequence except for
			$ (dollar sign).</li>
		<li>
			<p>Implement the following redirections:</p>
			<ul>
				<li>&lt; should redirect input.</li>
				<li>&gt; should redirect output.</li>
				<li>&lt;&lt; should be given a delimiter, then read the input
					until a line containing the delimiter is seen. However, it
					doesn’t have to update the history!</li>
				<li>&gt;&gt; should redirect output in append mode.</li>
			</ul>
		</li>
		<li>Implement pipes (| character). The output of each command in the
			pipeline is connected to the input of the next command via a pipe.
		</li>
		<li>Handle environment variables ($ followed by a sequence of
			characters) which should expand to their values.</li>
		<li>Handle $? which should expand to the exit status of the most
			recently executed foreground pipeline.</li>
		<li>Handle ctrl-C, ctrl-D and ctrl-\ which should behave like in bash.
		</li>
		<li>
			<p>The shell had to implement the following built-in commands:</p>
			<ul>
				<li>echo with option -n</li>
				<li>cd with only a relative or absolute path</li>
				<li>pwd with no options</li>
				<li>export with no options</li>
				<li>unset with no options</li>
				<li>env with no options or arguments</li>
				<li>exit with no options</li>
			</ul>
		</li>
	</ul>
	<br>
	<div class="h_1">
		<h2 class="styled_header"><i>01. Architecting the Command Execution Pipeline</i></h2>
	</div>
	<br>
	<p>We designed the shell’s core logic around a continuous <b>Read-Eval-Print
	Loop (REPL)</b>. To ensure modularity, we broke the execution flow into
four distinct stages:</p>
	<ul class="bullet_points">
		<li><b>Lexical Analysis (Tokenization):</b> We implemented a
			tokenizer to break the input string into discrete tokens,
			handling delimiters like spaces, tabs, and newlines while
			respecting quoted strings (e.g., <code>"grep 'hello world'"
			</code>).</li>
		<li><b>Expansions:</b> We scanned the tokens for variable
			expansions, and Here Document (<code>&lt;&lt;</code>) reading
			and expansion of input, saving it in a temporary file for later
			use.</li>
		<li><b>Execution:</b> We scanned for any pipe (<code>|</code>) and
			created the necessary child processes.</li>
		<li><b>Redirection &amp; Piping:</b> I used <code>pipe()</code> and
			<code>dup2()</code> to create IPC channels, ensuring seamless
			data flow between concurrent processes.</li>
	</ul>
	<br>
	<div class="h_2">
		<h2 class="styled_header"><i>02. Low-Level Process Management</i></h2>
	</div>
	<br>
	<p>Executing the commands involved:</p>
	<ul class="bullet_points">
		<li><b>Forking:</b> Using the <code>fork()</code> system call to create
			child processes , ensuring the main shell process remained
			responsive.</li>
		<li><b>Execution:</b> Leveraging the <code>execve()</code> to load
			binaries and <code>waitpid()</code> to synchronize process completion
			and capture exit statuses.</li>
		<li><b>Signal Handling:</b> Writing custom handlers for <code>SIGINT
			</code> (Ctrl+C) to ensure interrupts only targeted the foreground
			child process, preventing the shell from crashing.</li>
	</ul>
	<br>
	<div class="h_3">
		<h2 class="styled_header"><i>03. Memory Management and Robustness</i></h2>
	</div>
	<br>
	<p>Since a shell is a long-running process, I prioritized resource
	management:</p>
	<ul class="bullet_points">
		<li><b>Leak Prevention:</b> We utilized <b>Valgrind</b> and
			<b>AddressSanitizer</b> to profile memory, ensuring every heap
			allocation was freed after the execution cycle.</li>
		<li><b>Robust Error Handling:</b> We structured the execution phase
			within a dedicated sub-process, allowing the shell to recover
			gracefully from fatal command errors without exiting the main
			loop.</li>
	</ul>
	<br>
	<div class="h_1">
		<h2 class="styled_header"><i>04. Outcome</i></h2>
	</div>
	<br>
	<p style="">The project culminated in a fully functional Unix-like shell,
	demonstrating my proficiency in C, memory management and systems
	programming; the source code and logic are available on my GitHub.</p>
	<br>
	<div style="display: flex; justify-content: center;">
		<a target=target="_blank" href="https://github.com/rodperei/minishell" class="git_button"><?xml version="1.0"?><svg class="git_icon" xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 30 30" width="30px" height="30px">    <path d="M15,3C8.373,3,3,8.373,3,15c0,5.623,3.872,10.328,9.092,11.63C12.036,26.468,12,26.28,12,26.047v-2.051 c-0.487,0-1.303,0-1.508,0c-0.821,0-1.551-0.353-1.905-1.009c-0.393-0.729-0.461-1.844-1.435-2.526 c-0.289-0.227-0.069-0.486,0.264-0.451c0.615,0.174,1.125,0.596,1.605,1.222c0.478,0.627,0.703,0.769,1.596,0.769 c0.433,0,1.081-0.025,1.691-0.121c0.328-0.833,0.895-1.6,1.588-1.962c-3.996-0.411-5.903-2.399-5.903-5.098 c0-1.162,0.495-2.286,1.336-3.233C9.053,10.647,8.706,8.73,9.435,8c1.798,0,2.885,1.166,3.146,1.481C13.477,9.174,14.461,9,15.495,9 c1.036,0,2.024,0.174,2.922,0.483C18.675,9.17,19.763,8,21.565,8c0.732,0.731,0.381,2.656,0.102,3.594 c0.836,0.945,1.328,2.066,1.328,3.226c0,2.697-1.904,4.684-5.894,5.097C18.199,20.49,19,22.1,19,23.313v2.734 c0,0.104-0.023,0.179-0.035,0.268C23.641,24.676,27,20.236,27,15C27,8.373,21.627,3,15,3z"/></svg>View Project</a>
	</div>
	<br>
	<br>
	<hr>
	<footer>
		<a href="https://www.linkedin.com/in/rodperei" target="_blank">LinkedIn</a>
	</footer>

	<script src="../script.js"></script>
</body>
</html>
